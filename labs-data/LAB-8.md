# Лабораторна робота №8 Перформанс

## Продуктивність (Performance). Аналіз результатів PageSpeed Insights

- **Час відображення першого значущого контенту (First Contentful Paint - FCP):**

  - Завантаження сторінки займає багато часу через великі файли або повільне серверне з'єднання.
  - Налаштувати CDN для статичних ресурсів, увімкнути стиснення Gzip/Brotli, оптимізувати серверні відповіді.

- **Час до інтерактивності (Time to Interactive - TTI):**

  - Сторінка довго стає інтерактивною через велику кількість JavaScript.
  - Видалити або відкласти непотрібні скрипти, розбити код на частини та перенести важкі скрипти в кінець сторінки.

- **Оптимізація зображень:**

  - Великі файли зображень без стиснення.
  - Перевести зображення у формат WebP/AVIF та адаптувати їх для різних пристроїв.

- **Кешування:**
  - Відсутні заголовки кешування для статичних ресурсів.
  - Налаштувати `Cache-Control` для довготривалого кешування.

# Звіт з аналізу навантаження

## Мета

Оцінити продуктивність системи, знайти проблеми та запропонувати шляхи оптимізації.

---

## Результати тестування

### Сценарії

- **Логін:** Успіх 95%, помилки `500` – 2%.
- **Створення події:** Успіх 90%, помилки `400` – 8%.
- **Завершення події:** Успіх 85%, помилки `403` – 10%.
- **Перегляд подій:** Успіх 98%, помилки `500` – 2%.

### Час відповіді

- **Середній:** 100–200 мс.
- **Максимальний:** до 700 мс (завершення події).

---

## Проблеми

1. **Високий час відповіді при завершенні події.**

   - **Причина:** перевантаження бази даних.

2. **Помилки `500`.**

   - **Причина:** нестабільна робота MongoDB при високому навантаженні.

3. **Масштабованість.**
   - Зростання часу відповіді при великій кількості запитів.

---

## Рекомендації

1. Оптимізувати обробку завершення подій (асинхронна логіка, кешування).
2. Налаштувати MongoDB (`maxPoolSize`, ретраї).
3. Додати балансування навантаження та масштабування.
4. Інтегрувати моніторинг для постійного контролю.

---

## Висновок

Система стабільна при середньому навантаженні. Необхідні оптимізації для роботи в пікових умовах.

# Звіт: Аналіз запитів до бази даних

## Виконані кроки

### 1. Увімкнення профілювання

Активовано профілювання в MongoDB на рівні `2` для збору детальної інформації про всі запити до бази даних.

### 2. Збір даних

Під час роботи системи виконані наступні сценарії:

- Логін користувача.
- Створення події.
- Участь у події.
- Завершення події.

### 3. Аналіз запитів

Проаналізовано лог запитів з колекції `system.profile`. Основна увага приділялася:

- Типам операцій (`query`, `insert`, `update`).
- Тривалості виконання запитів.
- Колекціям, до яких здійснювалися запити.

### 4. Виявлені результати

- Найбільша кількість запитів пов’язана з операціями аутентифікації та перевірки подій.
- Операції `query` мали середню тривалість виконання менше 100 мс.
- Основні запити виконувалися до колекцій `users` та `events`.

---

## Висновки

Аналіз запитів до бази даних надав цінну інформацію про основні операції, що виконуються системою. Виявлені дані підтверджують стабільну роботу бази даних без суттєвих затримок або помилок. Подальший моніторинг та аналіз будуть проводитися за необхідності.
